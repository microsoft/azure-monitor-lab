{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Azure Monitor Lab","text":"<p>Welcome to this interactive skills validation experience. Completing this module helps you prepare for the Deploy and configure Azure Monitor assessment.</p> <p>In this module, you practice configuring monitoring of various workloads and infrastructure services using Azure Monitor. The lab combines both learning and hands-on practice.</p>"},{"location":"#prerequisites","title":"Prerequisites","text":"<p>To complete this lab you need an Azure subscription. You can apply for an Azure Free Trial subscription at: https://aka.ms/azure-free-account</p>"},{"location":"#lab-structure","title":"Lab Structure","text":"<p>This lab consists of the following exercises:</p> <ol> <li>Introduction - Overview and learning objectives</li> <li>Prepare Azure Environment - Set up required resources</li> <li>Deploy Log Analytics - Configure Log Analytics workspace</li> <li>Monitor Web Apps - Enable Application Insights and monitoring</li> <li>Configure Monitoring for Compute Services - Set up data collection rules</li> <li>Configure Alerts - Create action groups and alert rules</li> </ol>"},{"location":"#estimated-time","title":"Estimated Time","text":"<p>The complete lab should take approximately 85 minutes to complete.</p>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Begin with the Introduction to understand the skills you'll be validating in this lab.</p>"},{"location":"01-introduction/","title":"Introduction","text":"<p>Welcome to this interactive skills validation experience. Completing this module helps you prepare for the Deploy and configure Azure Monitor assessment.</p> <p>In this module, you practice configuring monitoring of various workloads and infrastructure services using Azure Monitor. The lab combines both learning and hands-on practice. The skills validated include:</p> <ul> <li>Deploying and configuring Log Analytics.</li> <li>Configuring monitoring for Web apps.</li> <li>Monitoring compute and networking services.</li> <li>Configuring alerts.</li> </ul> <p>By the end of this guided exercise, you gain hands-on experience in creating and configuring these services in Azure.</p> <p>[!NOTE] This is a guided project module where you complete an end-to-end project by following step-by-step instructions.</p> Skilling area Skilling task Deploy Log Analytics <ul><li> Create a Log Analytics workspace. </li><li> Configure Log Analytics data retention and archive policies. </li><li> Enable access to a Log Analytics workspace.</li></ul> Monitor web apps <ul><li> Enable Application Insights. </li><li> Disable logging for .NET core snapshot debugger. </li><li>  Configure Web apps to be written to a Log Analytics workspace. </li><li>  Enable file and configuration tracking for web apps.</li></ul> Configure monitoring for compute services <ul><li> Create a data collection endpoint. </li><li> Create a data collection rule. </li><li> Add an IIS log collection to an existing data collection rule. </li><li> Configure Network Connection Monitor for a Linux IaaS virtual machine. </li></ul> Configure alerts <ul><li> Create an action group to send an email. </li><li>  Create an alert for VM CPU utilization. </li><ul> <p>Next step: Prepare your Azure Environment</p> <p>Click here to navigate to this page on the GitHub repo if not using pages</p>"},{"location":"02-prepare-azure-environment/","title":"Prepare Azure Environment","text":"<p>You must first complete the following exercise to prepare your Azure environment before you begin the lab exercises.</p> <p>Exercise: Prepare your Azure Environment</p> <p>Tasks: - Create a Log Analytics workspace. - Configure Log Analytics data retention and archive policies. - Enable access to a Log Analytics workspace.</p> <p>[!NOTE] To complete this lab you need an Azure subscription.</p>"},{"location":"02-prepare-azure-environment/#prepare-your-bring-your-own-subscription-byos","title":"Prepare your bring-your-own-subscription (BYOS)","text":"<p>This exercise should take approximately 30 minutes to complete.</p>"},{"location":"02-prepare-azure-environment/#prepare-your-bring-your-own-subscription-byos_1","title":"Prepare your bring-your-own-subscription (BYOS)","text":"<p>This set of lab exercises assumes that you have global administrator permissions to an Azure subscription.</p> <ol> <li>In the Azure Portal Search Bar, enter Resource Groups and select Resource groups from the list of results.</li> <li>On the Resource Groups page, select Create.</li> <li>On the Create a Resource Group page, select your subscription and enter the name rg-alpha. Set the region to East US, choose Review + Create, and then choose Create.</li> </ol> <p>Note: This set of exercises assumes that you choose to deploy in the East US Region, but you can change this to another region if you choose. Just remember that each time you see East US mentioned in these instructions you will need to substitute the region you have chosen.</p>"},{"location":"02-prepare-azure-environment/#create-app-log-examiners-security-group","title":"Create App Log Examiners security group","text":"<p>In this exercise, you create an Entra ID security group.</p> <ol> <li>In the Azure Portal Search Bar, enter Azure Active Directory (or Entra ID) from the list of results.</li> <li>On the Default Directory page, select Groups.</li> <li>On the Groups page, choose New Group.</li> <li>On the New Group page, provide the values in the following table and choose Create.</li> </ol> Property Value Group type Security Group name App Log Examiners Group description App Log Examiners"},{"location":"02-prepare-azure-environment/#deploy-and-configure-ws-vm1","title":"Deploy and configure WS-VM1","text":"<p>In this exercise, you deploy and configure a Windows Server virtual machine.</p> <ol> <li>In the Azure Portal Search Bar, enter Virtual Machines and select Virtual Machines from the list of results.</li> <li>On the Virtual Machines page, choose Create and select Azure Virtual Machine.</li> <li>On the Basics page of the Create A Virtual Machine wizard, select the following settings and then choose Review + Create.</li> </ol> Property Value Subscription Your subscription Resource Group rg-alpha Virtual machine name WS-VM1 Region East US Availability options No infrastructure redundancy required Security type Standard Image Windows Server 2022 Datacenter: Azure Edition \u2013 x64 Gen2 VM architecture x64 Size Standard_D4s_v3 \u2013 4 vcpus, 16 GiB memory Administrator account prime Password [Select a unique secure password] P@ssw0rdP@ssw0rd Inbound ports RDP 3389 <ol> <li>Review the settings and select Create.</li> <li>Wait for the deployment to complete. Once deployment completes choose Go to resource.</li> <li>On the WS-VM1 properties page, choose Networking.</li> <li>On the Networking page, select the RDP rule.</li> <li>On the RDP rule space, change the Source to My IP address and choose Save.</li> </ol> <p>This restricts incoming RDP connections to the IP address you're currently using.</p> <ol> <li>On the Networking page, choose Add inbound port rule.</li> <li> <p>On the Add inbound security rule page, configure the following settings and choose Add.</p> Property Value Source Any Source port ranges * Destination Any Service HTTP Action Allow Priority 310 Name AllowAnyHTTPInbound </li> <li> <p>On the WS-VM1 page, choose Connect.</p> </li> <li>Under Native RDP, choose Select.</li> <li>On the Native RDP page, choose Download RDP file and then open the file. Opening the RDP file opens the Remote Desktop Connection dialog box.</li> <li>On the Windows Security dialog box, choose More Choices and then choose Use a different account.</li> <li>Enter the username as .\\prime and the password as the secure password you chose in Step 3, and choose OK.</li> <li>When signed into the Windows Server virtual machine, right-click on the Start hint and then choose Windows PowerShell (Admin).</li> <li> <p>At the elevated command prompt, type the following command and press Enter.</p> <pre><code>Install-WindowsFeature Web-Server -IncludeAllSubFeature -IncludeManagementTools\n</code></pre> </li> <li> <p>When the installation completes run the following command to change to the web server root directory.</p> <pre><code>cd c:\\inetpub\\wwwroot\\\n</code></pre> </li> <li> <p>Run the following command.</p> <pre><code>Wget https://raw.githubusercontent.com/Azure-Samples/html-docs-hello-world/master/index.html -OutFile index.html\n</code></pre> </li> </ol>"},{"location":"02-prepare-azure-environment/#deploy-and-configure-lx-vm2","title":"Deploy and configure LX-VM2","text":"<p>In this exercise you deploy and configure a Linux virtual machine.</p> <ol> <li>In the Azure Portal Search Bar, enter Virtual Machines and select Virtual Machines from the list of results.</li> <li>On the Virtual Machines page, choose Create and select Azure Virtual Machine.</li> <li>On the Basics page of the Create A Virtual Machine wizard, select the following settings and then choose Review + Create.</li> </ol> Property Value Subscription Your subscription Resource Group rg-alpha Virtual machine name Linux-VM2 Region East US Availability options No infrastructure redundancy required Security type Standard Image Ubuntu Server 20.04 LTS \u2013 x64 Gen2 VM architecture x64 Size Standard_D2s_v3 \u2013 2 vcpus, 8 GiB memory Authentication type Password Username Prime Password [Select a unique secure password] P@ssw0rdP@ssw0rd Public inbound ports None <ol> <li>Review the information and choose Create.</li> <li>After the VM deploys, open the VM properties page and choose Extensions + Applications under Settings.</li> <li>Choose Add and select the Network Watcher Agent for Linux. Choose Next and then choose Review and Create. Choose Create.</li> </ol> <p>Note: The installation and configuration of the OmsAgentForLinux extension will be performed in Exercise 2 after the Log Analytics workspace is created.</p>"},{"location":"02-prepare-azure-environment/#deploy-a-web-app-with-an-sql-database","title":"Deploy a web app with an SQL Database","text":"<ol> <li>Ensure that you're signed into the Azure Portal.</li> <li>In your browser, open a new browser tab and navigate to https://github.com/Azure/azure-quickstart-templates/tree/master/quickstarts/microsoft.web/web-app-sql-database</li> <li>On the GitHub page, choose Deploy to Azure.</li> <li>A new tab opens. If necessary, re-sign into Azure with the account that has Global Administrator privileges.</li> <li>On the Basics page, select Edit template.</li> <li>In the template editor, delete the contents of lines 158 to 174 inclusive and delete the \",\" on line 157. Choose Save.</li> <li>On the Basics page, provide the following information and choose Next.</li> </ol> Property Value Subscription Your subscription Resource Group rg-alpha Region East US Sku Name F1 Sku Capacity 1 Sql Administrator Login prime Sql Administrator Login Password [Select a unique secure password] P@ssw0rdP@ssw0rd <ol> <li>Review the information presented and select Create.</li> <li>After the deployment completes, choose Go to resource group.</li> </ol>"},{"location":"02-prepare-azure-environment/#deploy-a-linux-web-app","title":"Deploy a Linux web app","text":"<ol> <li>Ensure that you're signed into the Azure Portal.</li> <li>In your browser, open a new browser tab and navigate to https://learn.microsoft.com/en-us/samples/azure/azure-quickstart-templates/webapp-basic-linux/</li> <li>On the GitHub page, choose Deploy to Azure.</li> <li>On the Basics page, provide the following information and choose Next.</li> </ol> Property Value Subscription Your subscription Resource Group rg-alpha Region East US Web app Name AzureLinuxAppWXYZ (assign a random number to the final four characters of the name) Sku S1 Linux Fx version php|7.4 <ol> <li>Review the information and choose Create.</li> </ol> <p>Next step: Deploy Log Analytics</p> <p>Click here to navigate to this page on the GitHub repo if not using pages</p>"},{"location":"03-exercise-deploy-log-analytics/","title":"Exercise 1: Deploy Log Analytics","text":"<p>This guided project consists of the four exercises:</p> <ul> <li>Exercise 1: Deploy Log Analytics</li> <li>Exercise 2: Monitor web apps</li> <li>Exercise 3: Configure monitoring for compute services</li> <li>Exercise 4: Configure alerts</li> </ul> <p>In Exercise 1, you deploy and configure a Log Analytics workspace</p> <ul> <li>Task 1: Create a Log Analytics workspace.</li> <li>Task 2: Configure Log Analytics data retention and archive policies.</li> <li>Task 3: Enable access to a Log Analytics workspace.</li> </ul> <p>[!NOTE] To complete this lab you will need an Azure subscription.</p> <p>I'll fetch that page and convert it to markdown for you.Here's the page converted to clean markdown:</p>"},{"location":"03-exercise-deploy-log-analytics/#skilling-tasks","title":"Skilling tasks","text":"<p>This exercise should take approximately 10 minutes to complete.</p>"},{"location":"03-exercise-deploy-log-analytics/#skilling-tasks_1","title":"Skilling tasks","text":"<ul> <li>Create a Log Analytics workspace</li> <li>Configure Log Analytics data retention and archive policies</li> <li>Enable access to a Log Analytics workspace</li> </ul>"},{"location":"03-exercise-deploy-log-analytics/#exercise-instructions","title":"Exercise instructions","text":""},{"location":"03-exercise-deploy-log-analytics/#create-a-log-analytics-workspace","title":"Create a Log Analytics workspace","text":"<ol> <li>In the Azure Portal Search Bar, enter Log Analytics and select Log Analytics workspaces from the list of results.</li> <li>On the Log Analytics workspaces page, choose Create.</li> <li>On the Basics page of the Create Log Analytics workspace wizard, provide the following information and choose Review + Create.</li> </ol> Property Value Subscription Your subscription Resource Group rg-alpha Name LogAnalytics1 Region East US <ol> <li>Choose Review + Create.</li> <li>Review the information and choose Create.</li> </ol>"},{"location":"03-exercise-deploy-log-analytics/#install-and-configure-the-azure-monitor-agent-on-linux-vm-using-a-data-collection-rule","title":"Install and configure the Azure Monitor Agent on Linux-VM using a Data Collection Rule","text":"<ol> <li>In the Azure Portal, enter Data Collection Rules in the search bar and select Data Collection Rules from the results.</li> <li>Select + Create to start a new data collection rule.</li> <li>On the Basics page, provide the following:</li> <li>Rule name: DCR-Linux-VM</li> <li>Subscription: Your subscription</li> <li>Resource Group: rg-alpha</li> <li>Region: East US (choose the region matching your VM/workspace)</li> <li>Platform type: Select Linux</li> <li>Select Next: Resources &gt;</li> <li>Under Resources, select + Add resources.</li> <li>Search for and select Linux-VM.</li> <li>Select Apply.</li> <li>Select Next: Collect and deliver &gt;</li> <li>In the Collect and deliver tab:</li> <li>Select + Add data source.</li> <li>For Data source type, choose Performance Counters.</li> <li>Select Next: Destination &gt;.</li> <li>Select + Add destination.</li> <li>Under Destination type choose Azure Monitor Logs.</li> <li>Under Destination Details choose LogAnalytics1 (rg-alpha).</li> <li>Select Add data source.</li> <li>Select Next: Review + create</li> <li>On the Review + create page, review your selections, and select Create to deploy the DCR.</li> </ol> <p>Note: Assigning a DCR to a VM automatically deploys the Azure Monitor Agent extension to the VM. You do NOT need to manually add the agent in the Extensions blade.</p>"},{"location":"03-exercise-deploy-log-analytics/#verify-agent-installation-and-data-ingestion","title":"Verify agent installation and data ingestion:","text":"<ol> <li>In the Azure Portal, use the search bar to search for Log Analytics workspaces and select it from the results.</li> <li>In the list of workspaces, select LogAnalytics1.</li> <li>In the left-hand menu of the LogAnalytics1 workspace, select Logs.</li> <li>Use the mode drop-down to change from Simple mode to KQL mode.</li> <li>In the query window, enter the following query:</li> </ol> <pre><code>Heartbeat\n| where Computer contains \"Linux-VM\"\n| sort by TimeGenerated desc\n</code></pre> <ol> <li>Select Run or press Shift + Enter to execute the query.</li> <li>If results are returned, data is flowing and the Azure Monitor Agent is working.</li> </ol>"},{"location":"03-exercise-deploy-log-analytics/#configure-log-analytics-data-retention-and-archive-policies","title":"Configure Log Analytics data retention and archive policies","text":"<ol> <li>In the Azure Portal Search Bar, enter Log Analytics and select Log Analytics workspaces from the list of results.</li> <li>On the Log Analytics workspaces page, choose LogAnalytics1.</li> <li>On the Log Analytics workspace page for LogAnalytics1, under Settings, choose Usage and estimated costs.</li> <li>Select Data Retention and set the slider to 60 days. Select OK.</li> <li>On the Log Analytics workspace page for LogAnalytics1, choose Usage and estimated costs.</li> <li>Select Daily cap. Select On. Set the daily cap to 10 GB and select OK.</li> </ol>"},{"location":"03-exercise-deploy-log-analytics/#enable-access-to-a-log-analytics-workspace","title":"Enable access to a Log Analytics workspace","text":"<ol> <li>In the Azure Portal Search Bar, enter Log Analytics and select Log Analytics workspaces from the list of results.</li> <li>On the Log Analytics workspaces page, choose LogAnalytics1.</li> <li>Select Access control (IAM).</li> <li>Choose Add and then choose Add role assignment.</li> <li>On the list of roles, select Log Analytics Reader and choose Next.</li> <li>On the Members page, choose Select Members and choose the App Log Examiners security group. Choose Select.</li> <li>On the Members step, choose Review + Assign.</li> </ol> <p>Next step: Monitor Web Apps</p> <p>Click here to navigate to this page on the GitHub repo if not using pages</p>"},{"location":"04-exercise-monitor-web-apps/","title":"Exercise 2: Monitor Web Apps","text":"<p>This guided project consists of the four exercises:</p> <ul> <li>Exercise 1: Deploy Log Analytics</li> <li>Exercise 2: Monitor web apps</li> <li>Exercise 3: Configure monitoring for compute services</li> <li>Exercise 4: Configure alerts</li> </ul> <p>In Exercise 2, you configure monitoring for web applications.</p> <ul> <li>Task 1: Enable Application Insights.</li> <li>Task 2: Disable logging for .NET core snapshot debugger.</li> <li>Task 3: Configure web app HTTP logs to be written to a Log Analytics workspace.</li> <li>Task 4: Configure SQL Insights data to be written to a Log Analytics workspace.</li> <li>Task 5: Enable file and configuration change tracking for web apps.</li> </ul> <p>Launch the exercise and follow the instructions. When you're done, be sure to return to this page so you can continue learning.</p> <p>[!NOTE] To complete this lab you will need an Azure subscription.</p> <p>This exercise should take approximately 20 minutes to complete.</p>"},{"location":"04-exercise-monitor-web-apps/#skilling-tasks","title":"Skilling tasks","text":"<ul> <li>Enable Application Insights</li> <li>Disable logging for .NET core snapshot debugger</li> <li>Configure web app HTTP logs to be written to a Log Analytics workspace</li> <li>Configure SQL Insights data to be written to a Log Analytics workspace</li> <li>Enable file and configuration change tracking for web apps</li> </ul>"},{"location":"04-exercise-monitor-web-apps/#exercise-instructions","title":"Exercise instructions","text":""},{"location":"04-exercise-monitor-web-apps/#enable-application-insights","title":"Enable Application Insights","text":"<ol> <li>In the Azure Portal Search Bar, enter rg-alpha and select rg-alpha from the list of results.</li> <li>From the list of items in the resource group, choose App Services for the Web App with an SQL Database.</li> <li>Under Monitoring choose Application Insights.</li> <li>On the Application Insights page, choose Turn On Application Insights.</li> <li>On the Application Insights page, ensure that Create a new resource is selected and that the Log Analytics Workspace is set to LogAnalytics1 and choose Apply.</li> <li>On the Apply monitoring settings dialog, choose Yes.</li> </ol>"},{"location":"04-exercise-monitor-web-apps/#disable-logging-for-net-core-snapshot-debugger","title":"Disable logging for .NET core snapshot debugger","text":"<ol> <li>In the Azure Portal Search Bar, enter rg-alpha and select rg-alpha from the list of results.</li> <li>From the list of items in the resource group, choose App Services for the Web App with an SQL Database.</li> <li>Under Monitoring choose Application Insights.</li> <li>Under Instrument your application, choose .NET Core and then set the Snapshot Debugger setting to Off. Choose Apply.</li> <li>On the Apply Monitoring Settings dialog box, choose Yes.</li> </ol>"},{"location":"04-exercise-monitor-web-apps/#configure-web-app-http-logs-to-be-written-to-a-log-analytics-workspace","title":"Configure web app HTTP logs to be written to a Log Analytics workspace","text":"<ol> <li>In the Azure Portal Search Bar, enter rg-alpha and select rg-alpha from the list of results.</li> <li>From the list of items in the resource group, choose App Services for the Web App with an SQL Database.</li> <li>Under Monitoring, choose Diagnostic settings.</li> <li>On the Diagnostic settings page, select + Add diagnostic settings.</li> <li>On the Diagnostic settings page, choose the following and select Save.</li> </ol> Property Value Diagnostic setting name httplogs Categories HTTP logs Destination details Send to Log Analytics workspace Subscription Your subscription Log Analytics workspace LogAnalytics1"},{"location":"04-exercise-monitor-web-apps/#configure-sql-insights-data-to-be-written-to-a-log-analytics-workspace","title":"Configure SQL Insights data to be written to a Log Analytics workspace","text":"<ol> <li>In the Azure Portal Search Bar, enter rg-alpha and select rg-alpha from the list of results.</li> <li>From the list of items in the resource group, choose the sample SQL database.</li> <li>Under Monitoring, choose Diagnostic settings.</li> <li>On the Diagnostic settings page, choose Add diagnostic setting.</li> <li>On the Diagnostic setting page, provide the following information and choose Save.</li> </ol> Property Value Diagnostic setting name InsightLogAnalytics Categories SQL Insights Destination details Send to Log Analytics workspace Subscription Your subscription Log Analytics workspace LogAnalytics1 <p>Next step: Monitor Compute Services</p> <p>Click here to navigate to this page on the GitHub repo if not using pages</p>"},{"location":"05-exercise-configure-monitoring-compute-services/","title":"Exercise 3: Configure Monitoring for Compute Services","text":"<p>This guided project consists of the four exercises:</p> <ul> <li>Exercise 1: Deploy Log Analytics</li> <li>Exercise 2: Monitor web apps</li> <li>Exercise 3: Configure monitoring for compute services</li> <li>Exercise 4: Configure alerts</li> </ul> <p>In Exercise 3, you configure monitoring for compute services and perform tasks related to integrating IaaS virtual machines with Azure Monitor.</p> <p>You create a data collection endpoint and a data collection rule to collect Windows Event logs. You then add an existing IIS log collection to the data collection rule. Finally, you configure Network Connection Monitor for a Linux IaaS virtual machine.</p> <ul> <li>Task 1: Create a data collection endpoint.</li> <li>Task 2: Create a data collection rule.</li> <li>Task 3: Add an IIS log collection to an existing data collection rule.</li> <li>Task 4: Configure Network Connection Monitor for a Linux IaaS virtual machine.</li> </ul> <p>[!NOTE] To complete this lab you will need an Azure subscription.</p> <p>This exercise should take approximately 15 minutes to complete.</p>"},{"location":"05-exercise-configure-monitoring-compute-services/#skilling-tasks","title":"Skilling tasks","text":"<ul> <li>Create a data collection endpoint</li> <li>Create a data collection rule</li> <li>Add an IIS log collection to an existing data collection rule</li> <li>Configure Network Connection Monitor for a Linux IaaS virtual machine</li> </ul>"},{"location":"05-exercise-configure-monitoring-compute-services/#exercise-instructions","title":"Exercise instructions","text":""},{"location":"05-exercise-configure-monitoring-compute-services/#create-a-data-collection-endpoint","title":"Create a data collection endpoint","text":"<ol> <li>In the Azure Portal Search Bar, enter Monitor and select Monitor from the list of results.</li> <li>In the Monitor page, under Settings, choose Data Collection Endpoints.</li> <li>On the Data Collection Endpoints page, choose Create.</li> <li>On the Create Data Collection Endpoint page, provide the following settings and then choose Review + Create.</li> </ol> Property Value Endpoint name IaaSVMCollectionEndpoint Subscription Your subscription Resource Group rg-alpha Region East US <ol> <li>Review the settings and choose Create.</li> </ol>"},{"location":"05-exercise-configure-monitoring-compute-services/#create-a-data-collection-rule","title":"Create a data collection rule","text":"<ol> <li>In the Azure Portal Search Bar, enter Monitor and select Monitor from the list of results.</li> <li>In the Monitor page, under Settings, choose Data Collection Rules.</li> <li>On the Data Collection Rules page, choose Create.</li> <li>On the Create Data Collection Rule page, configure the following settings and choose Next.</li> </ol> Property Value Rule name WinVMDCR Subscription Your subscription Resource Group rg-alpha Region East US Platform type Windows Data collection endpoint IaaSVMCollectionEndpoint <ol> <li>On the Resources page, choose Add Resources.</li> <li>On the Select a scope page, enable the WS-VM1 checkbox and choose Apply.</li> <li>On the Create Data Collection Rule page, choose Next.</li> <li>On the Collect and Deliver page, choose Add data source.</li> <li>On the Add data source page, select Windows Event Logs. In the Application category enable the Critical and Error categories. In the Security category, choose the Audit Failure category. In the System category, enable the Critical and Error categories.</li> <li>Choose Next.</li> <li> <p>On the Destination page, configure the following settings:</p> Property Value Destination type Azure Monitor Logs Subscription Your subscription Account or namespace LogAnalytics1 </li> <li> <p>Choose Add data source.</p> </li> <li>Choose Review + Create and then choose Create.</li> </ol>"},{"location":"05-exercise-configure-monitoring-compute-services/#add-an-iis-log-collection-to-an-existing-data-collection-rule","title":"Add an IIS log collection to an existing data collection rule","text":"<ol> <li>In the Azure Portal Search Bar, enter Monitor and select Monitor from the list of results.</li> <li>In the Monitor page, under Settings, choose Data Collection Rules.</li> <li>Choose the WinVMDRC rule in rg-alpha.</li> <li>Under Configuration, choose Data Sources.</li> <li>On the Data Sources page, choose Add.</li> <li>On the Add Data Source page, select IIS Logs.</li> <li>Choose Next.</li> <li>On the Destination page, configure the following settings:</li> </ol> Property Value Destination type Azure Monitor Logs Subscription Your subscription Account or namespace LogAnalytics1 <ol> <li>Choose Add data source.</li> </ol>"},{"location":"05-exercise-configure-monitoring-compute-services/#configure-network-connection-monitor-for-a-linux-iaas-virtual-machine","title":"Configure Network Connection Monitor for a Linux IaaS virtual machine","text":"<ol> <li>In the Azure Portal Search Bar, enter Network Watcher and select Network Watcher from the list of results.</li> <li>Under Monitoring, choose Connection Monitor.</li> <li>On the Connection Monitor page, choose Create.</li> <li>On the Basics page of the Create Connection Monitor wizard, provide the following information and choose Next.</li> </ol> Property Value Connection Monitor name LinuxVMPubIP Subscription Your subscription Region East US 2 Workspace LogAnalytics1 <ol> <li>On the Add test group details page, enter the name LinuxIPTest and choose Add sources.</li> <li>On the Add Sources page, select Azure Endpoints and set the type to Virtual machines. Select Subnet and then enable the Linux-VM checkbox. Choose Add Endpoints.</li> <li>Choose Add Test Configuration.</li> <li>On the Add Test Configuration page, enter the name DefaultHTTP and then choose Add Test Configuration.</li> <li>Choose Add Destinations. Select Azure Endpoints and set the type to Virtual machines. Select Subnet and then enable the WS-VM1 checkbox. Select Add Endpoints.</li> <li>Choose Add Test Group.</li> <li>Choose Review and Create and then choose Create.</li> </ol> <p>Next step: Configure Alerts</p> <p>Click here to navigate to Configure Alerts on the GitHub repo if not using pages</p>"},{"location":"06-exercise-configure-alerts/","title":"Exercise 4: Configure Alerts","text":"<p>This guided project consists of the four exercises:</p> <ul> <li>Exercise 1: Deploy Log Analytics</li> <li>Exercise 2: Monitor web apps</li> <li>Exercise 3: Configure monitoring for compute services</li> <li>Exercise 4: Configure alerts</li> </ul> <p>In Exercise 4, you configure two specific alerts: an action group to send an email, and an alert for virtual machine CPU utilization.</p> <ul> <li>Task 1: Create an action group to send an email.</li> <li>Task 2: Create an alert for virtual machine CPU utilization.</li> </ul> <p>[!NOTE] To complete this lab you need an Azure subscription.</p> <p>This exercise should take approximately 10 minutes to complete.</p>"},{"location":"06-exercise-configure-alerts/#skilling-tasks","title":"Skilling tasks","text":"<ul> <li>Create an action group to send an email</li> <li>Create an alert for virtual machine CPU utilization</li> </ul>"},{"location":"06-exercise-configure-alerts/#exercise-instructions","title":"Exercise instructions","text":""},{"location":"06-exercise-configure-alerts/#create-an-action-group-to-send-an-email","title":"Create an action group to send an email","text":"<ol> <li>In the Azure Portal Search Bar, enter Monitor and select Monitor from the list of results.</li> <li>Select Alerts in the navigation menu.</li> <li>Choose Action Groups.</li> <li>On the Action Groups page, choose Create.</li> <li>On the Basics page of the Create Action Group wizard, configure the following settings and choose Next.</li> </ol> Property Value Subscription Your subscription Resource Group rg-alpha Region Global Action group name NotifyCPU Display Name NotifyCPU <ol> <li>On the Notifications page, set the notification type to Email/SMS message/Push/Voice and the Name to NotificationEmail. Choose the Edit (pencil) icon.</li> <li>On the Email/SMS message/Push/Voice enable the email checkbox and enter the address prime@fabrikam.com. Choose OK.</li> <li>Choose Review and Create. Choose Create.</li> </ol>"},{"location":"06-exercise-configure-alerts/#create-an-alert-for-virtual-machine-cpu-utilization","title":"Create an alert for virtual machine CPU utilization","text":"<ol> <li>In the Azure Portal Search Bar, enter rg-alpha and select rg-alpha from the list of results.</li> <li>From the list of items in the resource group, choose Linux-VM2.</li> <li>On the Linux-VM2 properties page, choose Alerts under Monitoring.</li> <li>On the Alerts page, choose Create and then choose Alert rule.</li> <li>On the Condition page of the Create an Alert Rule wizard, set the Signal name to Percentage CPU. Use the default settings and choose Next.</li> <li>On the Actions page, choose Select Action Group.</li> <li>On the Select Action Groups page, choose NotifyCPU and choose Select.</li> <li>On the Details page enter the Alert rule name HighCPU. Choose Review and Create and then choose Create.</li> </ol>"},{"location":"06-exercise-configure-alerts/#clean-up-subscription","title":"Clean up subscription","text":"<p>To clean up the subscription, delete resource group rg-alpha and delete the App Log Examiners security group.</p>"}]}